
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Markeplace_HC</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#6d01e25d7c" class="toc-h1 toc-link" data-title="Общие положения">Общие положения</a>
          </li>
          <li>
            <a href="#57b2f020f3" class="toc-h1 toc-link" data-title="Предоставление каталога">Предоставление каталога</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#b25f544128" class="toc-h2 toc-link" data-title="Описание параметров выгрузки">Описание параметров выгрузки</a>
                  </li>
                  <li>
                    <a href="#xml" class="toc-h2 toc-link" data-title="Каталог в формате XML">Каталог в формате XML</a>
                  </li>
                  <li>
                    <a href="#317fb91a9c" class="toc-h2 toc-link" data-title="Информация о наличии товаров">Информация о наличии товаров</a>
                  </li>
                  <li>
                    <a href="#5f7c417405" class="toc-h2 toc-link" data-title="Процесс загрузки каталога">Процесс загрузки каталога</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#44b7115d87" class="toc-h1 toc-link" data-title="Точки самовывоза">Точки самовывоза</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#csv" class="toc-h2 toc-link" data-title="Описание параметров CSV с точками самовывоза">Описание параметров CSV с точками самовывоза</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#7d0433b90d" class="toc-h1 toc-link" data-title="Процесс покупки товара">Процесс покупки товара</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#e254debde2" class="toc-h2 toc-link" data-title="Покупка товара с доставкой курьером">Покупка товара с доставкой курьером</a>
                  </li>
                  <li>
                    <a href="#c3b63905bf" class="toc-h2 toc-link" data-title="Покупка товара с последующим самовывозом">Покупка товара с последующим самовывозом</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#post-order-check" class="toc-h1 toc-link" data-title="POST /order/check">POST /order/check</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#c35d6d472e" class="toc-h2 toc-link" data-title="Входные параметры">Входные параметры</a>
                  </li>
                  <li>
                    <a href="#1300eba048" class="toc-h2 toc-link" data-title="Параметры ответа">Параметры ответа</a>
                  </li>
                  <li>
                    <a href="#4e101f41fd" class="toc-h2 toc-link" data-title="Обработка ошибок">Обработка ошибок</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#post-order-orderid-reserve" class="toc-h1 toc-link" data-title="POST /order/:orderId/reserve">POST /order/:orderId/reserve</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#c35d6d472e-2" class="toc-h2 toc-link" data-title="Входные параметры">Входные параметры</a>
                  </li>
                  <li>
                    <a href="#1300eba048-2" class="toc-h2 toc-link" data-title="Параметры ответа">Параметры ответа</a>
                  </li>
                  <li>
                    <a href="#4e101f41fd-2" class="toc-h2 toc-link" data-title="Обработка ошибок">Обработка ошибок</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#post-order-orderid-status" class="toc-h1 toc-link" data-title="POST /order/:orderId/status">POST /order/:orderId/status</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#c35d6d472e-3" class="toc-h2 toc-link" data-title="Входные параметры">Входные параметры</a>
                  </li>
                  <li>
                    <a href="#1300eba048-3" class="toc-h2 toc-link" data-title="Параметры ответа">Параметры ответа</a>
                  </li>
                  <li>
                    <a href="#4e101f41fd-3" class="toc-h2 toc-link" data-title="Обработка ошибок">Обработка ошибок</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#get-order-orderid" class="toc-h1 toc-link" data-title="GET /order/:orderId">GET /order/:orderId</a>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="Errors">Errors</a>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='https://market.homecredit.ru'>Маркетлейс Home Credit</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='6d01e25d7c'>Общие положения</h1>
<p>Добро пожаловать на страницу интеграции с Маркетплейсом Хоум Кредит!</p>

<p>В документации детально описан процесс работы с клиентом от момента выбора товара и до момента взаиморасчета с партнером.</p>

<p>На странице содержатся требования к выгружаемому каталогу товаров и сервису API,который необходимо реализовать партнеру при осуществлении интеграции с Маркетплейсом.</p>

<aside class="notice">
Доступ в Личный кабинет партнера (далее ЛК) предоставляется по согласованию с менеджером, реквизиты доступа высылаются на заявленный адрес электронной почты (e-mail).
</aside>
<h1 id='57b2f020f3'>Предоставление каталога</h1>
<aside class="warning">
Партнер предоставляет каталог товаров в формате XML.
</aside>

<aside class="notice">
Базовый сценарий предполагает, что на каждый регион необходимо задать свой каталог. Возможен вариант когда каталог товаров един для всех регионов, данный сценарий необходимо предварительно согласовать с менеджером.
</aside>
<h2 id='b25f544128'>Описание параметров выгрузки</h2>
<p>Ниже описаны основные параметры для выгрузки каталога. Для успешной синхронизации каталога в нем должны присутствовать все обязательные параметры, а также соблюдаться структура выбранного формата.</p>

<p>Выгруженный каталог может содержать в себе любые другие параметры и элементы, например всю структуру YML (стандарт, разработанный Яндексом для принятия и размещения информации в базе данных Яндекс.Маркета), что не будет вызывать ошибок обработки каталога со стороны Маркетплейс.</p>
<h2 id='xml'>Каталог в формате XML</h2>
<p>Каталог обязательно должен иметь XML-заголовок, который начинается с первой строки, с нулевого элемента, в заголовке присутствуют атрибуты версии и используемая кодировка. Допустимые кодировки: UTF-8 или windows-1251. Пример заголовка:</p>

<p>За основу предложенной структуры XML-каталога использован формат выгрузки от <a href="https://yandex.ru/support/partnermarket/export/vendor-model.html">Яндекс.Маркет</a>, соответственно, если уже существует синхронизация с платформой Яндекс, достаточно внести незначительные дополнения, чтобы целевую выгрузку можно было задействовать для платформы Marketplace (минимально достаточно добавить атрибут credit в параметр offer, чтобы обозначить товары, которые планируется продавать в рассрочку)</p>
<h2 id='317fb91a9c'>Информация о наличии товаров</h2>
<p>Базовый сценарий предполагает, что товар может поступить в любую точку самовывоза в рамках региона за указанный в delivery-options срок.</p>

<p>Если товар есть не во всех точках самовывоза или существует техническое ограничение на перевозку товаров из одного пункта в другой, предусмотрен формат указания списка точек самовывоза для отдельно взятого товара, для этого необходимо использовать параметр points и перечислить в нем точки самовывоза:</p>

<p>Список точек самовывоза партнер загружает через Личный кабинет, данный процесс описан в разделе <a href="#19530bd8b7">Предоставление информации о точках самовывоза</a></p>
<h2 id='5f7c417405'>Процесс загрузки каталога</h2>
<p>Подготовленный каталог необходимо указать в настройках аккаунта, которые задаются в Личном кабинете. Для каждого региона необходимо указать свой URL до целевого каталога. В случае, если партнер присутствует во всех регионах и имеет единый товарный каталог, необходимо выбрать “Все регионы” (необходимо предварительное согласование менеджера).</p>

<p><img src="images/image_catalogue.jpeg" alt="Image catalogue" /></p>
<h1 id='44b7115d87'>Точки самовывоза</h1>
<p>Точки самовывоза передаются в виде CSV-таблицы с указанием адреса и режима работы. Необходимо использовать разделитель столбцов &quot;,&quot; (запятая).</p>

<p>Загрузка и актуализация списка происходит через Личный кабинет. Если для какого-то регионов не указаны точки самовывоза, Покупателю будет предложен вариант доставки курьером.</p>

<p>При возможности разместить CSV на внешнем источнике, можно указать URL до целевого файла.
<img src="images/image_selfservice.jpeg" alt="Image selfservice" /></p>
<h2 id='csv'>Описание параметров CSV с точками самовывоза</h2>
<table><thead>
<tr>
<th>Параметр</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><code>Id</code><br> string</td>
<td>Идентификатор точки самовывоза.</td>
</tr>
<tr>
<td><code>TradingPoint</code><br> integer</td>
<td>Код торговой точки, соответствующий данному пункту самовывоза. Код кредитного продукта можно уточнить у менеджера, ответственного за работу с банком.</td>
</tr>
<tr>
<td><code>RegionCode</code><br> integer</td>
<td>Идентификатор региона. Значение берется из списка регионов, в которых работает маркетплейс. Список регионов будет предоставлен со стороны Marketplace.</td>
</tr>
<tr>
<td><code>RegionName</code><br> string</td>
<td>Название региона согласно списку. Значение берется из списка регионов, в которых работает маркетплейс. Список регионов будет предоставлен со стороны Marketplace.</td>
</tr>
<tr>
<td><code>Address</code><br> string</td>
<td>Адрес точки самовывоза (произвольное описание).</td>
</tr>
<tr>
<td><code>workingDays</code><br> string</td>
<td>Режим работы в будние дни, формат XX:XX-XX:XX, например 11:00-20:00</td>
</tr>
<tr>
<td><code>Saturday</code><br> string</td>
<td>Режим работы в субботу, формат XX:XX-XX:XX, например 11:00-20:00. Если поле остается пустым, берется значение из workingDays, если указано false —в субботу пункт не работает.</td>
</tr>
<tr>
<td><code>Sunday</code><br>  string</td>
<td>Режим работы в воскресенье, формат XX:XX-XX:XX, например 11:00-20:00. Если поле остается пустым, берется значение из Saturday, если указано false —в воскресенье пункт не работает.</td>
</tr>
</tbody></table>
<h1 id='7d0433b90d'>Процесс покупки товара</h1><h2 id='e254debde2'>Покупка товара с доставкой курьером</h2>
<p>Данный сценарий предполагает, что Покупатель подписывает договор без участия партнера, после чего инициируется процесс доставки.
<img src="images/image_delivery_curier.jpeg" alt="Image delivery curier" /></p>
<h2 id='c3b63905bf'>Покупка товара с последующим самовывозом</h2>
<p>Данный сценарий предполагает, что в точке самовывоза партнера присутствует кредитный специалист, который имеет доступ в систему Банка и полностью сопровождает процесс подписания договора с Покупателем.
<img src="images/image_delivery_self.jpeg" alt="Image delivery self" /></p>
<h1 id='post-order-check'>POST /order/check</h1>
<p><strong>Проверка наличия товара у партнера.</strong><br>
В момент когда Покупатель выбрал предложение, партнеру поступает запрос на проверку наличия данного товара в регионе. В ответ партнер должен уведомить о возможности зарезервировать товар, а также прислать условия доставки и самовывоза. Расчет параметров получения товара клиентом должен производиться на основе доступных товаров. (Например, если доступно только 3 из 5 переданных в запросе товаров, стоимость доставки должна быть только для этих трех товаров).</p>
<h2 id='c35d6d472e'>Входные параметры</h2>
<p><code>POST https://example.com/order/check</code></p>

<blockquote>
<p>Пример запроса POST /order/check:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X POST https://example.com/order/check <span class="se">\</span>
  -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  -H <span class="s1">'cache-control: no-cache'</span> <span class="se">\</span>
  -d <span class="s1">'{"offersRequest":[
{"offerId":"123",
"quantity":1,
"regionId":77,
"productCode":"0-0-6"}
]}'</span>
</code></pre>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательность</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><code>offersRequest</code><br>  Array of <a href="#offerrequest">{offerRequest}</a></td>
<td>Обязательно</td>
<td>Массив объектов с запросами на проверку наличия товаров, которые выбрал Покупатель.</td>
</tr>
</tbody></table>
<h3 id='offerrequest'>объект offerRequest</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательность</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><code>offerId</code> <br> integer</td>
<td>Обязательно</td>
<td>Идентификатор товара из YML-каталога.</td>
</tr>
<tr>
<td><code>quantity</code><br>integer</td>
<td>Обязательно</td>
<td>Количество единиц товара для бронирования.</td>
</tr>
<tr>
<td><code>regionId</code> <br>integer</td>
<td>Обязательно</td>
<td>Идентификатор региона</td>
</tr>
<tr>
<td><code>productCode</code><br> string</td>
<td>Обязательно</td>
<td>Код кредитного продукта.<br> Примеры:<ul><li>0-0-3</li><li>0-0-6</li><li>0-0-10</li><li>0-0-12</li><li>0-0-18</li><li>0-0-24</li><li>0-0-36</li></ul></td>
</tr>
<tr>
<td><code>orderId</code><br> string</td>
<td>Необязательно</td>
<td>Идентификатор заказа, сгенерированный на стороне маркетплейса</td>
</tr>
</tbody></table>
<h2 id='1300eba048'>Параметры ответа</h2>
<p><code>HTTP status code 200 OK — Список товаров с указанием наличия и условий.</code></p>

<blockquote>
<p>Пример ответа в JSON:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"offersResponse"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"available"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"offerId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="s2">"points"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"0"</span><span class="w">
            </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"DeliveryOptions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"delivery"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="s2">"DeliveryID"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
                </span><span class="s2">"DeliveryName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Доставка СДЭК(склад-склад)"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"Cost"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w">
                </span><span class="s2">"Days"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1-2"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательность</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td>offersResponse Array of <a href="#offerresponse">{offerResponse}</a></td>
<td>Обязательно</td>
<td>Массив объектов со статусом резерва по каждому из запрошенных товаров.</td>
</tr>
<tr>
<td>DeliveryOptions <a href="#deliveryoption">{DeliveryOption}</a></td>
<td>Обязательно</td>
<td>Дополнительная информация по параметрам доставки, которую сможет выбирать Покупатель. Партнер должен представить варианты доставки для всей группы товаров.</td>
</tr>
</tbody></table>
<h3 id='offerresponse'>объект offerResponse</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательность</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><code>offerId</code><br>integer</td>
<td>Обязательно</td>
<td>Идентификатор товара из YML-каталога.</td>
</tr>
<tr>
<td><code>status</code><br>string</td>
<td>Обязательно</td>
<td>Варианты:<ul><li>‘available’ — товар доступен;</li><li>‘unavailable’ — товар недоступен.</li></ul></td>
</tr>
<tr>
<td><code>points</code><br> Array of string</td>
<td>Обязательно</td>
<td>Идентификаторы пунктов самовывоза, в которых доступен товар.<br>Также необходимо добавлять в список 0, если доступна доставка курьером. Пустой массив - товар недоступен.</td>
</tr>
<tr>
<td><code>reason</code><br>string</td>
<td>Необязательно</td>
<td>Указывается, если товар недоступен (пример: “not in stock”).</td>
</tr>
</tbody></table>
<h3 id='deliveryoption'>объект DeliveryOption</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательность</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><code>delivery</code><br> Array of Objects</td>
<td>Необязательно</td>
<td>Список вариантов доставки с указанием параметров: <ul><li>deliveryId—идентификатор службы доставки в системе партнера (будет передано при резервировании заказа);</li> <li>deliveryName— название службы доставки (будет отображено Покупателю);</li> <li>cost— стоимость доставки (если параметр отсутствует, то стоимость необходимо уточнять у службы доставки);</li><li> days— время доставки в днях (возможно указать интервал, например “5-7” интерпретируется как “доставка от 5 до 7 дней”).</li></ul></td>
</tr>
<tr>
<td><code>pickup</code><br> Array of Objects</td>
<td>Необязательно</td>
<td>Список точек самовывоза доступные для заказа с указанием параметров:<ul><li> point — идентификатор точки самовывоза из CSV;</li> <li>cost— стоимость за услугу самовывоза, можно указать 0 или не указывать данные параметр если самовывоз бесплатный;</li> <li>days — время доставки товара на точку самовывоза, после которой товар можно забрать, 0 - если можно забрать в тот же день (возможно указать интервал, например “5-7” интерпретируется как “доставка от 5 до 7 дней”).</li></ul></td>
</tr>
</tbody></table>
<h2 id='4e101f41fd'>Обработка ошибок</h2>
<blockquote>
<p>Пример ответа в JSON:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="s2">"errorFields"</span><span class="p">:[</span><span class="w">
    </span><span class="p">{</span><span class="s2">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"price is required"</span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="s2">"offerId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"not found"</span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Код HTTP</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td>5xx</td>
<td>Внутренняя ошибка сервера партнера.</td>
</tr>
<tr>
<td>422</td>
<td>Неверный формат запроса (указаны неверные или не указаны обязательные параметры запроса). В теле запроса необходимо передавать поля, которые переданы с ошибкой и указывать в чем она заключается.  Формулировка ошибки может быть произвольной строкой (см. пример).</td>
</tr>
</tbody></table>
<h1 id='post-order-orderid-reserve'>POST /order/:orderId/reserve</h1>
<p><strong>Резервирование товара у партнера</strong><br>
<aside class="notice">
Базовый сценарий предполагает 2 этапа резервирования:
</aside></p>

<p><strong>Предрезервирование</strong> — или, так называемое, &quot;краткосрочное&quot; резервирование — Покупатель выбрал товар и приступил к заполнению формы, партнер на вызов данного метода бронирует товар для заданного orderId, который будет использоваться при втором этапе резервирования, метод которого будет вызвано следом. партнер сам определяет время короткого резерва, но значение должно быть не меньше 30 минут</p>

<p><strong>Резервирование</strong> — после того, как Покупатель заполнил заявку, выбрал способ доставки, партнеру приходит запрос на резервирование товара до момента подписания кредитного договора клиентом.</p>
<h2 id='c35d6d472e-2'>Входные параметры</h2>
<p><code>POST https://example.com/order/:orderId/prereserve</code>
<code>POST https://example.com/order/:orderId/reserve</code></p>

<blockquote>
<p>Пример запроса POST /order/:orderId/reserve:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X POST https://example.com/order18022500002104/reserve <span class="se">\</span>
  -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  -H <span class="s1">'cache-control: no-cache'</span> <span class="se">\</span>
  -d <span class="s1">'{
  "orderId": "18022500002104", 
  "offerIds": [
    {
      "offer": 777, 
      "quantity": 1, 
      "price": 4000.0,
      "priceTotal": 5000.0
    }
    ], 
  "regionId": 77, 
  "pointId": "0",
  "productCode": "0-0-3",
  "client": { "firstName": "Иван", "lastName": "Иванов", "phone": "1244567", "email":"test@test.ru" },
  "address": {"country": "Россия", "region": "Москва", "district": "", "town": "Москва", "locality": "", "street": "Обводного канала", "house": "199", "flat": "", "block": "", "building": "", "zipcode": "190020"}
}'</span>
</code></pre>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательность</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><code>orderId</code><br>  string</td>
<td>Обязательно</td>
<td>Идентификатор заказа, сгенерированный на стороне маркетплейса.</td>
</tr>
<tr>
<td><code>offerIds</code><br> Array of <a href="#offer">{offer}</a></td>
<td>Обязательно</td>
<td>Массив объектов с идентификаторами товаров и их количество.</td>
</tr>
<tr>
<td><code>regionId</code><br> integer</td>
<td>Обязательно</td>
<td>Идентификатор региона из списка.</td>
</tr>
<tr>
<td><code>pointId</code><br>string</td>
<td>Обязательно</td>
<td>Идентификатор точки самовывоза из CSV, 0 - если выбрана доставка курьером.</td>
</tr>
<tr>
<td><code>deliveryId</code><br>integer</td>
<td>Необязательно</td>
<td>Идентификатор службы доставки в системе партнера.</td>
</tr>
<tr>
<td><code>productCode</code><br>string</td>
<td>Обязательно</td>
<td>Код кредитного продукта.<br> Примеры:<ul><li>0-0-3</li><li>0-0-6</li><li>0-0-10</li><li>0-0-12</li><li>0-0-18</li><li>0-0-24</li><li>0-0-36</li></ul></td>
</tr>
<tr>
<td><code>address</code><br> <a href="#address">{address}</a></td>
<td>Необязательно</td>
<td>Адрес в формате КЛАДР, указывается, если выбрана доставка курьером.</td>
</tr>
<tr>
<td><code>client</code><br> <a href="#clientInfo">{clientInfo}</a></td>
<td>Обязательно(для метода reserve)</td>
<td>Информация о клиенте.</td>
</tr>
</tbody></table>
<h3 id='offer'>объект offer</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательность</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><code>offerId</code><br> integer</td>
<td>Обязательно</td>
<td>Идентификатор товара из YML-каталога.</td>
</tr>
<tr>
<td><code>quantity</code><br> integer</td>
<td>Обязательно</td>
<td>Количество единиц товара.</td>
</tr>
<tr>
<td><code>price</code><br> float</td>
<td>Обязательно</td>
<td>Цена товара с учетом скидки, предоставляемой партнером. Размер скидки зависит от используемого кредитного продукта (срока рассрочки) и согласован с партнером.</td>
</tr>
<tr>
<td><code>priceTotal</code><br> float</td>
<td>Обязательно</td>
<td>Цена товара без учета скидки, то есть стоимость товара, которую партнер заявил в своем каталоге.</td>
</tr>
</tbody></table>
<h3 id='address'>объект address</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательность</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><code>country</code><br>  string</td>
<td>Обязательно</td>
<td>Код страны по КЛАДР.</td>
</tr>
<tr>
<td><code>region</code><br> string</td>
<td>Обязательно</td>
<td>Регион.</td>
</tr>
<tr>
<td><code>district</code><br>string</td>
<td>Обязательно</td>
<td>Район.</td>
</tr>
<tr>
<td><code>town</code><br>string</td>
<td>Обязательно</td>
<td>Город.</td>
</tr>
<tr>
<td><code>locality</code><br>string</td>
<td>Обязательно</td>
<td>Населенный пункт.</td>
</tr>
<tr>
<td><code>street</code> <br>string</td>
<td>Обязательно</td>
<td>Улица.</td>
</tr>
<tr>
<td><code>house</code><br> string</td>
<td>Обязательно</td>
<td>Дом.</td>
</tr>
<tr>
<td><code>flat</code> <br>string</td>
<td>Необязательно</td>
<td>Квартира.</td>
</tr>
<tr>
<td><code>block</code> <br>string</td>
<td>Необязательно</td>
<td>Корпус.</td>
</tr>
<tr>
<td><code>building</code> <br>string</td>
<td>Необязательно</td>
<td>Строение.</td>
</tr>
<tr>
<td><code>zipcode</code> <br>string</td>
<td>Обязательно</td>
<td>Индекс.</td>
</tr>
</tbody></table>
<h3 id='clientinfo'>объект clientInfo</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательность</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><code>firstName</code><br>string</td>
<td>Обязательно</td>
<td>Имя клиента.</td>
</tr>
<tr>
<td><code>lastName</code><br>string</td>
<td>Обязательно</td>
<td>Фамилия клиента.</td>
</tr>
<tr>
<td><code>middleName</code><br>string</td>
<td>Необязательно</td>
<td>Отчество клиента.</td>
</tr>
<tr>
<td><code>email</code><br>string</td>
<td>Необязательно</td>
<td>E-mail.</td>
</tr>
<tr>
<td><code>phone</code><br>string</td>
<td>Обязательно</td>
<td>Телефон клиента. Номер должен быть ровно 10 цифр.</td>
</tr>
</tbody></table>
<h2 id='1300eba048-2'>Параметры ответа</h2>
<p><code>HTTP status code 200 OK — Товар предрезервирован(ответ на метод prereserve).</code></p>

<blockquote>
<p>Пример ответа в JSON:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
</span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"prereserved"</span><span class="p">,</span><span class="w">
</span><span class="s2">"PartnerOrderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345"</span><span class="p">,</span><span class="w">
</span><span class="s2">"orderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"18022600000999"</span><span class="p">,</span><span class="w">
</span><span class="s2">"reserveDuring"</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательность</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><code>status</code><br> string</td>
<td>Обязательно</td>
<td>значение: &quot;prereserved&quot;</td>
</tr>
<tr>
<td><code>reserveDuring</code> <br>integer</td>
<td>Необязательно</td>
<td>Время в минутах для которого действует предрезервирование (короткий резерв). Если значение не указано, либо оно меньше 30, то будет взято значение по-умолчанию — 30 минут.</td>
</tr>
<tr>
<td><code>partnerOrderId</code> <br>string</td>
<td>Необязательно</td>
<td>Идентификатор заказа, сгенерированный на стороне партнера.</td>
</tr>
</tbody></table>

<p><code>HTTP status code 200 OK — Товар зарезервирован(ответ на метод reserve).</code></p>

<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательность</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><code>status</code><br> string</td>
<td>Обязательно</td>
<td>значение: &quot;prereserved&quot;</td>
</tr>
<tr>
<td><code>partnerOrderId</code> <br>string</td>
<td>Необязательно</td>
<td>Идентификатор заказа, сгенерированный на стороне партнера.</td>
</tr>
</tbody></table>

<p><code>HTTP status code 200 OK — Товар недоступен для резервирования.</code></p>

<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательность</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><code>status</code><br> string</td>
<td>Обязательно</td>
<td>значение: &#39;cancelled&#39;.</td>
</tr>
<tr>
<td><code>reason</code> <br>string</td>
<td>Обязательно</td>
<td>Причина отказа в резервировании (Пример: &#39;address is not in delivery area&#39;).</td>
</tr>
<tr>
<td><code>partnerOrderId</code> <br>string</td>
<td>Необязательно</td>
<td>Идентификатор заказа, сгенерированный на стороне партнера.</td>
</tr>
</tbody></table>
<h2 id='4e101f41fd-2'>Обработка ошибок</h2>
<blockquote>
<p>Пример ответа в JSON:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="s2">"errorFields"</span><span class="p">:[</span><span class="w">
      </span><span class="p">{</span><span class="s2">"clientInfo"</span><span class="p">:</span><span class="w"> 
        </span><span class="p">{</span><span class="w">
        </span><span class="s2">"phone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"phone is required"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Параметр</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><code>5xx</code></td>
<td>Внутренняя ошибка сервера партнера.</td>
</tr>
<tr>
<td><code>422</code></td>
<td>Неверный формат запроса (указаны неверные или не указаны обязательные параметры запроса).<br> В теле запроса необходимо передавать поля, которые переданы с ошибкой и указывать в чем она заключается. Формулировка ошибки может быть произвольной строкой (см. пример).</td>
</tr>
<tr>
<td><code>404</code></td>
<td>Заказ не существует или указан неверный идентификатор.</td>
</tr>
</tbody></table>
<h1 id='post-order-orderid-status'>POST /order/:orderId/status</h1>
<p><strong>Передача статуса кредитной заявки партнера</strong></p>

<p>Данным методом Маркетплейс передает партнеру статус заявки в случае подписания(signed), что для партнера служит сигналом для доставки заказа клиенту или на пункт самовывоза. Либо отменяет заказ.</p>

<aside class="notice">
Возможные сценарии:
</aside>

<table><thead>
<tr>
<th>Статус</th>
<th>Описание</th>
<th>Действия партнера</th>
</tr>
</thead><tbody>
<tr>
<td>Кредит отменен<br>(CANCELLED)</td>
<td>Отказ клиента. Также можно интерпретировать как отмена бронирования.</td>
<td>Партнер отменяет заказ.</td>
</tr>
<tr>
<td>Кредит подписан<br>(SIGNED)</td>
<td>Покупатель подписал кредитный договор и ожидает получение товара.</td>
<td>Партнер может выдать товар на пункте самовывоза, либо начинает процесс доставки.</td>
</tr>
</tbody></table>
<h2 id='c35d6d472e-3'>Входные параметры</h2>
<p><code>POST https://example.com/order/:orderId/status</code></p>

<blockquote>
<p>Пример запроса POST /order/:orderId/status:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X POST <span class="se">\</span>
  https://example.com/order/1234567890/status/ <span class="se">\</span>
  -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  -H <span class="s1">'cache-control: no-cache'</span> <span class="se">\</span>
  -d <span class="s1">'{
    "orderId":"1234567890",
    "PartnerOrderId":"777",
    "status":"SIGNED"
  }'</span>
</code></pre>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательность</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><code>orderId</code><br>string</td>
<td>Обязательно</td>
<td>Идентификатор заказа, сгенерированный на стороне Маркетплейс.</td>
</tr>
<tr>
<td><code>PartnerOrderId</code><br>string</td>
<td>Необязательно</td>
<td>Идентификатор заказа, сгенерированный на стороне партнера. Обязательный параметр, если партнер вернул этот параметр (номера заказа) на этапе резервирования.</td>
</tr>
<tr>
<td><code>status</code><br>string</td>
<td>Обязательно</td>
<td>Статус кредитной заявки (передается в качестве url-параметра).<br> Возможные варианты:<br><ul><li> CANCELLED - Кредит отменен.</li> <li>Отказ клиента.SIGNED - Кредит подписан.</li></ul></td>
</tr>
</tbody></table>
<h2 id='1300eba048-3'>Параметры ответа</h2>
<p><code>HTTP status code 200 OK —  Товар принят в обработку.</code></p>

<blockquote>
<p>Примеры ответов в JSON:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"PartnerOrderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"reserved"</span><span class="w">

</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательность</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><code>partnerOrderId</code> <br>string</td>
<td>Необязательно</td>
<td>Идентификатор заказа, сгенерированный на стороне партнера.</td>
</tr>
<tr>
<td><code>status</code><br> string</td>
<td>Обязательно</td>
<td>Значение: &#39;reserved&#39;</td>
</tr>
</tbody></table>

<p><code>HTTP status code 200 OK — Товар доставляется.</code></p>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"PartnerOrderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"delivering"</span><span class="w">

</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательность</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><code>partnerOrderId</code> <br>string</td>
<td>Необязательно</td>
<td>Идентификатор заказа, сгенерированный на стороне партнера.</td>
</tr>
<tr>
<td><code>status</code><br> string</td>
<td>Обязательно</td>
<td>Значение: &#39;delivering&#39;.</td>
</tr>
</tbody></table>

<p><code>HTTP status code 200 OK — Товар не будет доставлен(Отмена заказа).</code></p>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"PartnerOrderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cancelled"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"address is not in delivery area"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательность</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><code>partnerOrderId</code> <br>string</td>
<td>Необязательно</td>
<td>Идентификатор заказа, сгенерированный на стороне партнера.</td>
</tr>
<tr>
<td><code>status</code><br> string</td>
<td>Обязательно</td>
<td>Значение: &#39;reserved&#39;</td>
</tr>
<tr>
<td><code>reason</code> <br> string</td>
<td>Обязательно</td>
<td>Причина отказа (Пример: &#39;address is not in delivery area&#39;).</td>
</tr>
</tbody></table>
<h2 id='4e101f41fd-3'>Обработка ошибок</h2>
<blockquote>
<p>Пример ответа в JSON:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="s2">"errorFields"</span><span class="p">:[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"not valid status"</span><span class="w">
    </span><span class="p">}</span><span class="w"> 
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательность</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><code>partnerOrderId</code> <br>string</td>
<td>Необязательно</td>
<td>Идентификатор заказа, сгенерированный на стороне партнера.</td>
</tr>
<tr>
<td><code>status</code><br> string</td>
<td>Обязательно</td>
<td>Значение: &#39;reserved&#39;</td>
</tr>
<tr>
<td><code>reason</code> <br> string</td>
<td>Обязательно</td>
<td>Причина отказа (Пример: &#39;address is not in delivery area&#39;).</td>
</tr>
</tbody></table>
<h1 id='get-order-orderid'>GET /order/:orderId</h1>
<p><strong>Проверка статуса заказа</strong></p>

<aside class="notice">
Возможные сценарии:
</aside>

<table><thead>
<tr>
<th>Статус</th>
<th>Описания</th>
<th>Действия MaketPlace</th>
</tr>
</thead><tbody>
<tr>
<td>Короткий резерв(prereserved)</td>
<td>Партнер подтвердил, что выбранный товар зарезервирован в режиме Короткий резерв до момента одобрения рассрочки для Покупателя</td>
<td>Покупатель заполняет заявку на рассрочку и ожидает её одобрение. MarketPlace вызывает метод Резервирования (reserve), либо отменяет Короткий Резерв, если одобрение не было получено, либо Покупатель отказался от заполнения формы.</td>
</tr>
<tr>
<td>Товар зарезервирован (reserved)</td>
<td>Партнер подтвердил, что выбранный товар зарезервирован до момента подписания Покупателем Кредитного договора</td>
<td>MarketPlace отправляет договор на подписание (в случае курьерской доставки), либо готовит печатные формы договора (в случае подписания на торговой точке партнера).</td>
</tr>
<tr>
<td>Товар находится в процессе доставки (delivering)</td>
<td>Партнер сообщает, что товар находится в процессе доставки Покупателю.</td>
<td>MarketPlace ожидает получение финального статуса.</td>
</tr>
<tr>
<td>Товар доставлен (delivered)</td>
<td>Партнер сообщает, что товар доставлен/выдан Покупателю.</td>
<td>MarketPlace начинает процедуру взаиморасчета с партнером.</td>
</tr>
<tr>
<td>Заказ отклонен (cancelled)</td>
<td>Партнер сообщает, что заказ отклонен. Дополнительно указывает причину отказа в поле reason.</td>
<td>MarketPlace отклоняет заказ внутри своей базы данных, информирует Покупателя об отмене.</td>
</tr>
</tbody></table>
<h1 id='errors'>Errors</h1>
<aside class="notice">
This error section is stored in a separate file in <code>includes/_errors.md</code>. Slate allows you to optionally separate out your docs into many files...just save them to the <code>includes</code> folder and add them to the top of your <code>index.md</code>'s frontmatter. Files are included in the order listed.
</aside>

<p>The Kittn API uses the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request -- Your request is invalid.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized -- Your API key is wrong.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden -- The kitten requested is hidden for administrators only.</td>
</tr>
<tr>
<td>404</td>
<td>Not Found -- The specified kitten could not be found.</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed -- You tried to access a kitten with an invalid method.</td>
</tr>
<tr>
<td>406</td>
<td>Not Acceptable -- You requested a format that isn&#39;t json.</td>
</tr>
<tr>
<td>410</td>
<td>Gone -- The kitten requested has been removed from our servers.</td>
</tr>
<tr>
<td>418</td>
<td>I&#39;m a teapot.</td>
</tr>
<tr>
<td>429</td>
<td>Too Many Requests -- You&#39;re requesting too many kittens! Slow down!</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error -- We had a problem with our server. Try again later.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable -- We&#39;re temporarily offline for maintenance. Please try again later.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
          </div>
      </div>
    </div>
  </body>
</html>
